{
    "swagger": "2.0",
    "info": {
        "description": "演示说明文档",
        "title": "Go-Easy微服务框架API",
        "contact": {
            "name": "go-swagger帮助文档",
            "url": "https://github.com/swaggo/swag/blob/master/README_zh-CN.md"
        },
        "version": "1.0.0"
    },
    "host": "localhost:8180",
    "basePath": "/",
    "paths": {
        "/process/def/get": {
            "get": {
                "description": "返回的是Node数组，流程是由N个Node组成的",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "流程定义"
                ],
                "summary": "获取流程定义",
                "parameters": [
                    {
                        "type": "string",
                        "example": "1",
                        "description": "流程ID",
                        "name": "id",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Node数组",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Node"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/def/list": {
            "get": {
                "description": "引擎可能被多个系统、组件等使用，source表示从哪个来源创建的流程",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "流程定义"
                ],
                "summary": "获取特定source下所有流程",
                "parameters": [
                    {
                        "type": "string",
                        "example": "办公系统",
                        "description": "来源",
                        "name": "source",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.ProcessDefine"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/def/save": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "流程定义"
                ],
                "summary": "流程生成/升级",
                "parameters": [
                    {
                        "type": "string",
                        "example": "员工请假",
                        "description": "流程名称",
                        "name": "ProcessName",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "json字符串",
                        "description": "流程定义资源(json)",
                        "name": "Resource",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "0001",
                        "description": "创建者ID",
                        "name": "CreateUserID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "办公系统",
                        "description": "来源",
                        "name": "Source",
                        "in": "formData",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/inst/start": {
            "post": {
                "description": "返回流程实例ID",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "流程实例"
                ],
                "summary": "开始流程",
                "parameters": [
                    {
                        "type": "string",
                        "example": "1",
                        "description": "流程ID",
                        "name": "ProcessID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"订单001\"",
                        "description": "业务员ID",
                        "name": "BusinessID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"家中有事请假三天,请领导批准\"",
                        "description": "评论意见",
                        "name": "Comment",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "example": "\"{\"User\":\"001\"}\"",
                        "description": "变量(Json)",
                        "name": "VariablesJson",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "integer"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/task/pass": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "任务"
                ],
                "summary": "任务通过",
                "parameters": [
                    {
                        "type": "string",
                        "example": "1",
                        "description": "任务ID",
                        "name": "TaskID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"同意请假\"",
                        "description": "评论意见",
                        "name": "Comment",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "example": "\"{\"User\":\"001\"}\"",
                        "description": "变量(Json)",
                        "name": "VariablesJson",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "ok",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/task/reject": {
            "post": {
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "任务"
                ],
                "summary": "任务驳回",
                "parameters": [
                    {
                        "type": "string",
                        "example": "1",
                        "description": "任务ID",
                        "name": "TaskID",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "example": "\"不同意\"",
                        "description": "评论意见",
                        "name": "Comment",
                        "in": "formData"
                    },
                    {
                        "type": "string",
                        "example": "\"{\"User\":\"001\"}\"",
                        "description": "变量(Json)",
                        "name": "VariablesJson",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "ok",
                        "schema": {
                            "type": "string"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/process/task/todo": {
            "get": {
                "description": "返回的是任务数组",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "任务"
                ],
                "summary": "获取待办任务",
                "parameters": [
                    {
                        "type": "string",
                        "example": "\"U001\"",
                        "description": "用户ID",
                        "name": "userid",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/model.Task"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "model.Condition": {
            "type": "object",
            "properties": {
                "expression": {
                    "description": "条件表达式",
                    "type": "string"
                },
                "nodeID": {
                    "description": "满足条件后转跳到哪个节点",
                    "type": "string"
                }
            }
        },
        "model.ExclusiveGateway": {
            "type": "object",
            "properties": {
                "conditions": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/model.Condition"
                    }
                }
            }
        },
        "model.Node": {
            "type": "object",
            "properties": {
                "exitEvents": {
                    "description": "退出事件",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "gwconfig": {
                    "description": "Role        []string //节点处理角色数组。注意，一旦使用角色，则该节点默认不能会签。因为系统无法预先知道角色中存在多少用户。除非通过事件修改.暂时不用",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.ExclusiveGateway"
                        }
                    ]
                },
                "isCosigned": {
                    "description": "Comment   string            //备注应该是运行时task输入",
                    "type": "integer"
                },
                "nextNodeIDs": {
                    "description": "下级节点(节点可以有N个直接下级节点)  是否需要下级节点？感觉可以不用。需要，因为生成task时候需要知道下级是谁，或者可以通过计算得知",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "nodeID": {
                    "description": "节点名称",
                    "type": "string"
                },
                "nodeName": {
                    "description": "节点名字",
                    "type": "string"
                },
                "nodeType": {
                    "description": "节点类型 0:开始节点 1:任务节点,指的是需要人完成的节点 2:参考activiti的网关.目前只实现了排他网关 3:结束节点",
                    "allOf": [
                        {
                            "$ref": "#/definitions/model.NodeType"
                        }
                    ]
                },
                "preEvents": {
                    "description": "前置事件",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "prevNodeIDs": {
                    "description": "上级节点(不管是任务节点还是结束节点，因为分支的存在，所以它的上级节点可能都会有多个)",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "userIDs": {
                    "description": "节点处理人数组",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "model.NodeType": {
            "type": "integer",
            "enum": [
                0,
                1,
                2,
                3
            ],
            "x-enum-comments": {
                "EndNode": "结束节点,结束节点不需要人参与，到了此节点，则流程实例完成",
                "GateWayNode": "参考activiti的网关.目前只实现了排他网关",
                "RootNode": "开始节点",
                "TaskNode": "任务节点,指的是需要人完成的节点"
            },
            "x-enum-varnames": [
                "RootNode",
                "TaskNode",
                "GateWayNode",
                "EndNode"
            ]
        },
        "model.ProcessDefine": {
            "type": "object",
            "properties": {
                "createTime": {
                    "description": "创建时间",
                    "type": "string"
                },
                "id": {
                    "description": "流程ID",
                    "type": "integer"
                },
                "name": {
                    "description": "流程名字",
                    "type": "string"
                },
                "resource": {
                    "description": "流程定义模板",
                    "type": "string"
                },
                "source": {
                    "description": "来源(引擎可能被多个系统、组件等使用，这里记下从哪个来源创建的流程",
                    "type": "string"
                },
                "userID": {
                    "description": "创建者ID",
                    "type": "string"
                },
                "version": {
                    "description": "版本号",
                    "type": "integer"
                }
            }
        },
        "model.Task": {
            "type": "object",
            "properties": {
                "batchCode": {
                    "description": "批次码.节点会被驳回，一个节点可能产生多批task,用此码做分别",
                    "type": "string"
                },
                "businessID": {
                    "description": "业务ID",
                    "type": "string"
                },
                "comment": {
                    "description": "评论意见",
                    "type": "string"
                },
                "createTime": {
                    "description": "系统创建任务时间",
                    "type": "string"
                },
                "finishedTime": {
                    "description": "处理任务时间",
                    "type": "string"
                },
                "isCosigned": {
                    "description": "0:任意一人通过即可 1:会签",
                    "type": "integer"
                },
                "isFinished": {
                    "description": "0:任务未处理 1:处理完成",
                    "type": "integer"
                },
                "isPassed": {
                    "description": "任务是否通过 0:驳回 1:通过",
                    "type": "integer"
                },
                "nodeID": {
                    "description": "节点ID",
                    "type": "string"
                },
                "nodeName": {
                    "description": "节点名称",
                    "type": "string"
                },
                "prevNodeID": {
                    "description": "上一节点ID",
                    "type": "string"
                },
                "procID": {
                    "description": "流程ID",
                    "type": "integer"
                },
                "procInstID": {
                    "description": "流程实例ID",
                    "type": "integer"
                },
                "procName": {
                    "description": "流程名称",
                    "type": "string"
                },
                "taskID": {
                    "description": "任务ID",
                    "type": "integer"
                },
                "userID": {
                    "description": "分配用户ID",
                    "type": "string"
                }
            }
        }
    }
}